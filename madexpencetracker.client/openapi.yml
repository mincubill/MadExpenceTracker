  openapi: 3.0.3
  info:
    title: MadExpencesTracker
    version: 1.0.0
  servers:
    - url: http://localhost:8080/api
    - url: https://localhost:8080/api
  paths:
    /expence:
      post:
        tags:
          - Expences
        summary: Add a new Expence
        description: Add a new Expence
        operationId: addExpence
        requestBody:
          description: Create a new Expence
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expence'
          required: true
        responses:
          '201':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Expence'
          '409':
            description: Already created
          '500':
            description: Internal server error
      put:
        tags:
          - Expences
        summary: Update an existing Expence
        description: Update an existing Expence by Id
        operationId: updateExpence
        requestBody:
          description: Update an existent Expence in the store
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expence'
          required: true
        responses:
          '202':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Expence'
          '400':
            description: Invalid ID supplied
          '404':
            description: Expence not found
          '500':
            description: Internal server error
    /expence/{Id}:
      get:
        tags:
          - Expences
        summary: Find a Expence by ID
        description: Returns a single Expence
        operationId: getExpenceById
        parameters:
          - name: Id
            in: path
            description: ID of Expence to return
            required: true
            schema:
              type: string
              format: guid
        responses:
          '200':
            description: successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Expence'
          '400':
            description: Invalid ID supplied
          '404':
            description: Expence not found
          '500':
            description: Internal server error
      delete:
        tags:
          - Expences
        summary: Deletes a Expence
        description: delete a Expence
        operationId: deleteExpence
        parameters:
          - name: Id
            in: path
            description: ID of Expence to delete
            required: true
            schema:
              type: string
              format: guid
        responses:
          '200':
            description: Deleted
          '404':
            description: Expence not found
          '500':
            description: Internal server error
    /expences:
      get:
        tags:
          - Expences
        summary: Returns a map of Expences
        description: Returns a map of Expences
        operationId: getExpences
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/ExpencesArray'
          '204':
            description: No Expences registered
          '404':
            description: Expence not found
          '500':
            description: Internal server error
    /expences/{Id}:
      get:
        tags:
          - Expences
        summary: Returns a map of Expences
        description: Returns a map of Expences
        operationId: getExpencesById
        parameters:
          - name: Id
            in: path
            description: ID of Expence to return
            required: true
            schema:
              type: string
              format: guid
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Expences'
          '204':
            description: No Expences registered
          '404':
            description: Expence not found
          '500':
            description: Internal server error
    /expences/current:
      get:
        tags:
          - Expences
        summary: Returns a map of Expences
        description: Returns a map of Expences
        operationId: getCurrentExpences
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Expences'
          '204':
            description: No Expences registered
          '404':
            description: Expence not found
          '500':
            description: Internal server error
            
    /income:
      post:
        tags:
          - Incomes
        summary: Add a new Income
        description: Add a new Income
        operationId: addIncome
        requestBody:
          description: Create a new Income
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
          required: true
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Income'
          '409':
            description: Already created
          '500':
            description: Internal server error
      put:
        tags:
          - Incomes
        summary: Update an existing Income
        description: Update an existing Income by Id
        operationId: updateIncome
        requestBody:
          description: Update an existent Income in the store
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
          required: true
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Income'
          '400':
            description: Invalid ID supplied
          '404':
            description: Income not found
          '500':
            description: Internal server error
    /income/{Id}:
      get:
        tags:
          - Incomes
        summary: Find a Income by ID
        description: Returns a single Income
        operationId: getIncomeyById
        parameters:
          - name: Id
            in: path
            description: ID of Income to return
            required: true
            schema:
              type: string
              format: guid
        responses:
          '200':
            description: successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Income'
          '400':
            description: Invalid ID supplied
          '404':
            description: Income not found
          '500':
            description: Internal server error
      delete:
        tags:
          - Incomes
        summary: Deletes a Income
        description: delete a Income
        operationId: deleteIncome
        parameters:
          - name: Id
            in: path
            description: ID of Income to delete
            required: true
            schema:
              type: string
              format: guid
        responses:
          '404':
            description: Income not found
          '500':
            description: Internal server error
    /incomes:
      get:
        tags:
          - Incomes
        summary: Returns a map of Expences
        description: Returns a map of Expences
        operationId: getIncomes
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/IncomesArray'
          '204':
            description: No Expences registered
          '404':
            description: Expence not found
          '500':
            description: Internal server error
    /incomes/{Id}:
      get:
        tags:
          - Incomes
        summary: Returns Incomes
        description: Returns a map of Incomes
        operationId: getIncomesById
        parameters:
          - name: Id
            in: path
            description: ID of Income to delete
            required: true
            schema:
              type: string
              format: guid
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Incomes'
          '204':
            description: No Incomes registered
          '404':
            description: Income not found
          '500':
            description: Internal server error
    /incomes/current:
      get:
        tags:
          - Incomes
        summary: Returns Incomes
        description: Returns a map of Incomes
        operationId: getCurrentIncomes
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Incomes'
          '204':
            description: No Incomes registered
          '404':
            description: Income not found
          '500':
            description: Internal server error
            
    /amount/{expenceId}/{incomeId}:
      get:
        tags:
          - Amounts
        summary: Returns a map of Amounts
        description: Returns a map of Amounts
        operationId: getAmount
        parameters:
          - name: expenceId
            in: path
            description: ID of Income to delete
            required: true
            schema:
              type: string
              format: guid
          - name: incomeId
            in: path
            description: ID of Income to delete
            required: true
            schema:
              type: string
              format: guid
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Amount'
          '204':
            description: No Expences registered
          '500':
            description: Internal server error
    /amount:
      post:
        tags:
          - Amounts
        summary: Create Amount
        description: This can only be done by the logged in Amount.
        operationId: createAmount
        requestBody:
          description: Created Amount object
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Amount'
        responses:
          default:
            description: successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Amount'        
    /amounts:
      get:
        tags:
          - Amounts
        summary: Returns a map of Amounts
        description: Returns a map of Amounts
        operationId: getAmounts
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Amounts'
          '204':
            description: No Expences registered
          '500':
            description: Internal server error
    /amounts/{Id}:
      get:
        tags:
          - Amounts
        summary: Get Amount by Amount ID
        description: ''
        operationId: getAmountByID
        parameters:
          - name: Id
            in: path
            description: 'The name that needs to be fetched. Use Amount1 for testing. '
            required: true
            schema:
              type: string
        responses:
          '200':
            description: successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Amount'
          '400':
            description: Invalid Amountname supplied
          '404':
            description: Amount not found
            
    /configuration:
      get:
        tags:
          - Configuration
        summary: Returns a map of Configuration
        description: Returns a map of Configuration
        operationId: getConfiguration
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Configuration'
          '204':
            description: No Expences registered
          '404':
            description: Expence not found
          '500':
            description: Internal server error
      post:
        tags:
          - Configuration
        summary: Add a new Configuration
        description: Add a new Configuration
        operationId: addConfiguration
        requestBody:
          description: Create a new Configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Configuration'
          required: true
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Configuration'
          '409':
            description: Already created
          '500':
            description: Internal server error
      put:
        tags:
          - Configuration
        summary: Update an existing Configuration
        description: Update an existing Configuration by Id
        operationId: updateConfiguration
        requestBody:
          description: Update an existent Configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Configuration'
          required: true
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Configuration'
          '400':
            description: Invalid ID supplied
          '404':
            description: Expence not found
          '500':
            description: Internal server error
            
    /monthIndex:
      get:
        tags:
          - MonthIndex
        summary: Returns a map of Configuration
        description: Returns a map of Configuration
        operationId: getMonthIndex
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/MonthIndexes'
          '204':
            description: No Expences registered
          '404':
            description: Expence not found
          '500':
            description: Internal server error
      post:
        tags:
          - MonthIndex
        summary: Add a new Configuration
        description: Add a new Configuration
        operationId: addMonthIndex
        requestBody:
          description: Create a new Configuration
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthIndexes'
          required: true
        responses:
          '200':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/Configuration'
          '409':
            description: Already created
          '500':
            description: Internal server error
            
    /monthClose:
      post:
        tags:
          - Operations
        summary: Closes the month
        description: Closes the month
        operationId: closeMonth
        requestBody:
          description: Closes the month
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthResume'
                
          required: true
        responses:
          '201':
            description: Successful operation
            content:
              application/json:
                schema:
                  $ref: '#/components/schemas/MonthIndex'
          '409':
            description: Already created
          '500':
            description: Internal server error
        
        
            
  components:
    schemas:
      Expence:
        type: object
        properties:
          Id:
            type: string
            format: guid
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          Name:
            type: string
            example: almacen
          Date:
            type: string
            example: 2023/12/01
          ExpenceType:
            type: string
            enum: [base, aditional]
            example: aditional
          Amount:
            type: number
            example: 5990
      
      Income:
        type: object
        properties:
          Id:
            type: string
            format: guid
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          Name:
            type: string
            example: sueldo
          Date:
            type: string
            example: 2023/12/01
          Amount:
            type: number
            example: 1500000
        
      Amount:
        type: object
        properties:
          Id:
            type: string
            format: guid
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          BaseExpences:
            type: number
            example: 1554990
          AditionalExpences:
            type: number
            example: 599680
          Savings:
            type: number
            example: 200000
      
      Configuration:
        type: object
        properties:
          SavingsRate:
            type: number
            example: 20
            
      MonthIndex:
        type: object
        properties:
          Id:
            type: string
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          Month:
            type: string
            format: guid
            example: 2023/12
          ExpencesId:
            type: string
            format: guid
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          IncomesId:
            type: string
            format: guid
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          AmountsId:
            type: string
            format: guid
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          SavingsRate:
            type: number
            example: 20
          
      Expences:
        type: object
        properties:
          Id:
            type: string
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          RunningMonth:
            type: string
            example: 2023/12
          Expences:
            type: array
            items:
             $ref: '#/components/schemas/Expence'
      
      Incomes:
        type: object
        properties:
          Id:
            type: string
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          RunningMonth:
            type: string
            example: 2023/12
          Incomes:
            type: array
            items:
             $ref: '#/components/schemas/Income'
      
      Amounts:
        type: object
        properties:
          Id:
            type: string
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          Amount:
            type: array
            items:
             $ref: '#/components/schemas/Amount'
             
      MonthIndexes:
        type: object
        properties:
          Id:
            type: string
            example: 40b140dc-ce99-4fb8-8ca1-497196ce67d7
          MonthIndex:
            type: array
            items:
              $ref: '#/components/schemas/MonthIndex'
        
      ExpencesArray:
        type: array
        items:
         $ref: '#/components/schemas/Expences'
         
      IncomesArray:
        type: array
        items:
         $ref: '#/components/schemas/Incomes'
      
      MonthResume:
        type: object
        properties:
          expences:
            $ref: '#/components/schemas/Expences'
          incomes:
            $ref: '#/components/schemas/Incomes'
          amounts:
            $ref: '#/components/schemas/Amount'
      
